(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();function D(){const e=window.location.pathname,n=document.querySelector(".header__link.nonograms"),r=document.querySelector(".header__link.gallery");(e.endsWith("/nonograms/")?n:r).classList.add("accent")}const q=document.querySelector(".switch-theme__input");function M(e){const n=document.cookie.split(";").map(r=>r.trim());for(const r of n){const[a,t]=r.split("=");if(a===e)return t}return null}function _(e){const n=document.querySelector(".switch-theme__input");n.checked=e==="dark",document.documentElement.className=e}function v(e,n,r){let a=new Date;a.setTime(a.getTime()+r*24*60*60*1e3);let t=`expires=${a.toUTCString()}`;document.cookie=`${e}=${n};${t};path=/`}function H(e){e.currentTarget.checked?(document.documentElement.classList.replace("light","dark"),v("displayMode","dark",30)):(document.documentElement.classList.replace("dark","light"),v("displayMode","light",30))}class A{constructor(n){this.playlist=n,this.currentTrackIndex=0,this.isPlaying=!1,this.audioPlayer=new Audio,this.audioPlayer.src=this.playlist[this.currentTrackIndex],this.audioPlayer.addEventListener("ended",()=>this.playNextTrack())}playNextTrack(){this.currentTrackIndex=(this.currentTrackIndex+1)%this.playlist.length,this.audioPlayer.src=this.playlist[this.currentTrackIndex],this.audioPlayer.play()}play(){this.audioPlayer.play(),this.isPlaying=!0}pause(){this.audioPlayer.pause(),this.isPlaying=!1}togglePlayPause(){this.isPlaying?this.pause():this.play()}}const P="/Palmo-Edu/nonograms//music/",J=[`${P}alexander-nakarada-emotional-piano-improvisation.mp3`,`${P}alexander-nakarada-winter.mp3`],$=new A(J);function B(e){$.togglePlayPause(),e.currentTarget.classList.toggle("off")}const G=document.querySelector(".header__btn.turn-music"),b=document.querySelector(".modal__container"),u=document.querySelector(".modal");function L(e){e&&u.classList.add(e),b.classList.add("active"),u.classList.add("active")}function k(e){u.append(e)}function p(){for(b.classList.remove("active"),u.classList.remove("active");u.firstElementChild.nextElementSibling;)u.firstElementChild.nextElementSibling.remove()}const x=u==null?void 0:u.querySelector(".close"),K=[[0,0,0,1,1],[0,0,0,1,0],[0,0,0,1,0],[1,1,1,1,0],[0,1,0,1,0]],V=[[1,0,1,0,1],[1,1,1,1,1],[0,1,1,1,0],[0,1,0,1,0],[0,1,1,1,0]],j=[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[0,0,1,0,0],[0,1,1,1,0]],z=[[0,1,1,1,0],[0,1,1,1,0],[0,1,1,1,0],[0,0,1,0,0],[0,1,1,1,0]],F=[[0,1,1,1,0],[1,1,1,1,1],[1,0,1,0,1],[1,1,1,1,1],[0,1,0,1,0]],R=[[0,0,1,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,0,1,0],[1,0,0,0,0,0,0,0,0,1],[1,0,1,1,0,0,1,1,0,1],[1,0,0,0,0,0,0,0,0,1],[1,0,0,0,1,1,0,0,0,1],[1,0,1,0,0,0,0,1,0,1],[1,0,0,1,1,1,1,0,0,1],[0,1,0,0,0,0,0,0,1,0],[0,0,1,1,1,1,1,1,0,0]],U=[[0,0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,0],[0,0,0,1,1,1,1,1,0,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0]],W=[[0,0,1,0,1,0,1,0,0,0],[0,0,1,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0,0],[0,1,1,0,1,1,1,1,1,1],[0,1,1,0,1,1,1,1,0,1],[0,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0,0],[0,1,1,1,1,1,1,1,1,0]],Z=[[0,0,0,0,1,0,0,0,0,0],[0,0,0,1,1,1,0,0,0,0],[0,0,1,1,1,1,1,0,0,0],[0,1,1,1,1,1,1,1,0,0],[1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,0],[0,1,0,0,1,0,0,1,0,0],[0,1,0,0,1,0,0,1,0,0],[0,1,1,1,1,0,0,1,0,0],[0,1,1,1,1,0,0,1,0,0]],Q=[[0,0,1,1,0,0,0,1,1,0],[0,1,0,0,1,0,1,0,0,1],[0,1,0,1,1,1,1,1,0,1],[0,0,1,1,0,1,0,1,1,0],[0,0,0,1,1,1,1,1,0,0],[0,0,1,1,1,0,1,1,1,0],[0,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,0]],X=[[1,1,0,1,1,0,0,0,0,0,0,1,1,0,1],[1,1,0,1,1,0,1,0,0,1,0,1,1,0,1],[0,1,1,1,1,0,1,0,0,1,0,1,1,0,1],[0,0,1,1,1,1,1,0,0,0,1,1,1,1,1],[0,0,0,0,1,1,0,1,1,1,1,1,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,1,0,1,0,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1],[0,1,0,1,1,1,0,0,0,0,1,1,1,1,1],[0,1,1,1,1,1,0,0,0,0,1,1,1,1,1],[0,0,1,1,1,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1]],Y=[[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[1,1,0,1,1,0,1,0,0,0,1,1,0,1,1],[1,1,1,1,1,0,1,0,0,0,1,1,1,1,1],[1,0,0,0,1,0,1,0,0,0,1,0,0,0,1],[1,0,1,0,1,0,1,0,0,0,1,0,1,0,1],[1,0,1,0,1,1,1,1,1,1,1,0,1,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,1,0,0,0,0,0,0,0,1,0,0,1],[1,0,1,1,1,0,0,0,0,0,1,1,1,0,1],[1,0,0,1,0,0,1,1,1,0,0,1,0,0,1],[1,0,0,1,0,0,1,1,1,0,0,1,0,0,1],[1,0,0,0,0,0,1,1,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],e1=[[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,0,1,1,1,1,1,1,1,0,1,1,0],[0,1,0,0,0,1,1,0,1,1,0,0,0,1,0],[0,1,1,0,1,1,0,0,0,1,1,0,1,1,0],[0,1,1,0,1,1,0,0,0,1,1,0,1,1,0],[0,1,1,1,1,1,0,0,0,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0]],t1=[[0,0,0,0,0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,1,1,1,1,0,1,1,1],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],[1,0,0,0,0,0,1,1,1,1,1,1,1,1,0],[1,1,1,0,0,1,1,1,0,0,0,1,1,1,0],[1,1,1,1,1,1,1,0,1,1,1,0,1,1,0],[0,1,1,1,1,1,0,1,1,1,1,0,1,1,0],[0,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,0,1,1,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,0,0,0]],n1=[[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,1,1,1,1,0,0,1,1,0,1],[0,0,0,1,1,1,0,0,1,0,0,1,0,1,0],[1,1,1,0,1,1,1,0,1,0,0,1,0,0,0],[1,1,1,1,1,1,1,1,0,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,1,0,0,0,1,1,0],[0,0,0,0,1,1,1,1,1,1,0,0,0,1,1],[0,0,0,0,0,1,1,1,1,1,1,1,0,0,1],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,0,0,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,1,1,1,1,0,0,1,1,1,0],[0,0,0,0,1,1,1,0,0,0,1,1,1,0,0]],w={easy:[{name:"Dinosaur",matrix:K},{name:"Fortress",matrix:V},{name:"Plane",matrix:j},{name:"Goblet",matrix:z},{name:"Skull",matrix:F}],medium:[{name:"House",matrix:Z},{name:"Aerostat",matrix:U},{name:"Cuppa",matrix:W},{name:"Smiley",matrix:R},{name:"Mouse",matrix:Q}],hard:[{name:"Deer",matrix:X},{name:"Rat",matrix:n1},{name:"Castle",matrix:Y},{name:"Duck",matrix:t1},{name:"Church",matrix:e1}]};function o1(e,n){e.innerHTML="",w[n].map(t=>t.name).forEach(t=>{const o=document.createElement("option");o.value=t,o.textContent=t,o.className="nonogram-names-option",e.appendChild(o)})}const d=JSON.parse(localStorage.getItem("currentNonogram"))||null,i={nonogram:{name:"",playerName:"uknown player",difficulty:"",matrix:[],currentProgress:(d==null?void 0:d.currentProgress)||[],truthyCellsIndexes:(d==null?void 0:d.truthyCellsIndexes)||[],excludedCellsIndexes:(d==null?void 0:d.excludedCellsIndexes)||[],truthyCells:[],falsyCells:[]}},I=i.nonogram;function N(e){for(const n in e)e.hasOwnProperty(n)&&I.hasOwnProperty(n)&&(I[n]=e[n])}function r1(e=0){return Array.from({length:e},()=>Array(e).fill(0))}function a1(e){const n=[];for(let r=0;r<e[0].length;r++){const a=[];for(let t=e.length-1;t>=0;t--)a.push(e[t][r]);n.push(a.reverse())}return n}function T(e){let n=[],r=1;if(!e.includes(1))return n.push(0),n.join(" ");for(let a=0;a<e.length;a+=1){let t=e[a],o=e[a+1];t===1&&o===1?r+=1:t===1&&!o&&(n.push(r),r=1)}return n.join(" ")}function s1(){const n=document.getElementById("helpDialog").content.cloneNode(!0);return n.querySelector(".ok").addEventListener("click",p),n}function c1(){const e=i.nonogram.matrix,n=a1(e),r=document.createElement("thead"),a=document.createElement("tr");for(let t=0;t<=e.length;t++){const o=document.createElement("th");if(o.className=`th_top ${i.nonogram.difficulty}`,t===0){const s=document.createElement("button");s.textContent="?",s.title="HELP",s.addEventListener("click",()=>{const l=s1();k(l),L("confirm")}),o.appendChild(s)}if(t>0&&n[t-1]){const s=T(n[t-1]);o.innerHTML=s.replace(/\s/g,"<br>")}a.appendChild(o)}return r.appendChild(a),r}function O(){const e={name:"",playerName:"",difficulty:"",matrix:[],currentProgress:[],truthyCells:[],falsyCells:[],truthyCellsIndexes:[],excludedCellsIndexes:[]};N(e),localStorage.setItem("currentNonogram",JSON.stringify(e))}function l1(){const{truthyCells:e,falsyCells:n}=i.nonogram;e.forEach(r=>{r.classList.remove("excluded","border5x5H","border5x5V"),r.classList.add("colorized")}),n.forEach(r=>{r.classList.remove("colorized","excluded","border5x5H","border5x5V")}),h.style.pointerEvents="none",O()}function i1(){const n=document.getElementById("victoryDialog").content.cloneNode(!0);return n.querySelector(".ok").addEventListener("click",p),n}function d1(){const e=i1();k(e),L("victory"),l1()}function u1(e,n){if(e.target.nodeName!=="TD")return;const r=i.nonogram.currentProgress,a=i.nonogram.matrix,t=e.target;t.classList.toggle("colorized"),t.classList.remove("excluded");const o=n.indexOf(t),s=Math.floor(o/a.length),l=o-a.length*s,c=r[s];let m=c[l];m=m?0:1,c[l]=m;const f=i.nonogram.truthyCellsIndexes,g=i.nonogram.excludedCellsIndexes;if(m)f.push(o);else{const E=f.indexOf(o);E!==-1&&f.splice(E,1)}const S=g.indexOf(o);S!==-1&&g.splice(S,1);const y=JSON.parse(localStorage.getItem("currentNonogram"))||{};y.currentProgress=r,y.truthyCellsIndexes=f,y.excludedCellsIndexes=g,localStorage.setItem("currentNonogram",JSON.stringify(y)),JSON.stringify(r)===JSON.stringify(a)&&d1()}function m1(){const e=[],n=[],r=[],a=document.createElement("tbody"),t=i.nonogram.matrix;for(let o=0;o<t.length;o++){const s=document.createElement("tr");for(let l=0;l<=t.length;l++){let c;l===0?(c=document.createElement("th"),c.classList.add("th_left",i.nonogram.difficulty),c.textContent=T(t[o])):(c=document.createElement("td"),c.classList.add("td",i.nonogram.difficulty),l%5===0&&t.length>5&&l!==t[o].length&&c.classList.add("border5x5V"),(o+1)%5===0&&t.length>5&&o+1!==t.length&&c.classList.add("border5x5H"),t[o][l-1]===1&&r.push(c),t[o][l-1]===0&&n.push(c),e.push(c)),s.appendChild(c)}a.appendChild(s)}return a.addEventListener("click",o=>u1(o,e)),i.nonogram.truthyCells=r,i.nonogram.falsyCells=n,console.log(i),a}const h=document.getElementById("table");function f1(){h.innerHTML="";const e=c1(),n=m1();h.append(e,n)}function g1(){const n=document.getElementById("newGameDialog").content.cloneNode(!0),r=n.querySelector("form.start-game-form"),a=r.querySelector("#difficulty-select"),t=r.querySelector("#nonogram-names-select"),o=r.querySelector("#playerName");return a.addEventListener("change",()=>{const s=a.value;o1(t,s)}),r.addEventListener("submit",s=>{s.preventDefault();const l=t.value,c=a.value,m=w[c].find(({name:g})=>g===l).matrix,f={name:l,difficulty:c,playerName:o.value.trim()||"uknown player",matrix:m,currentProgress:r1(m.length)};O(),N(f),localStorage.setItem("currentNonogram",JSON.stringify(f)),p(),h.style.pointerEvents="all",f1()}),n}const C=document.querySelector(".control-btn.new-game");function y1(){C==null||C.addEventListener("click",()=>{const e=g1();k(e),L("confirm")})}document.addEventListener("DOMContentLoaded",function(){const e=M("displayMode")||"light";_(e)});q.addEventListener("click",H);G.addEventListener("click",B);D();y1();x==null||x.addEventListener("click",p);
//# sourceMappingURL=main-1BVMBAYM.js.map
