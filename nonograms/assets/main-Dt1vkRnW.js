(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function U(){const t=window.location.pathname,e=document.querySelector(".header__link.nonograms"),n=document.querySelector(".header__link.gallery");(t.endsWith("/nonograms/")?e:n).classList.add("accent")}const W=document.querySelector(".switch-theme__input");function Q(t){const e=document.cookie.split(";").map(n=>n.trim());for(const n of e){const[r,o]=n.split("=");if(r===t)return o}return null}function X(t){const e=document.querySelector(".switch-theme__input");e.checked=t==="dark",document.documentElement.className=t}function T(t,e,n){let r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);let o=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${o};path=/`}function Z(t){t.currentTarget.checked?(document.documentElement.classList.replace("light","dark"),T("displayMode","dark",30)):(document.documentElement.classList.replace("dark","light"),T("displayMode","light",30))}class Y{constructor(e){this.playlist=e,this.currentTrackIndex=0,this.isPlaying=!1,this.audioPlayer=new Audio,this.audioPlayer.src=this.playlist[this.currentTrackIndex],this.audioPlayer.addEventListener("ended",()=>this.playNextTrack())}playNextTrack(){this.currentTrackIndex=(this.currentTrackIndex+1)%this.playlist.length,this.audioPlayer.src=this.playlist[this.currentTrackIndex],this.audioPlayer.play()}play(){this.audioPlayer.play(),this.isPlaying=!0}pause(){this.audioPlayer.pause(),this.isPlaying=!1}togglePlayPause(){this.isPlaying?this.pause():this.play()}}const O="/Palmo-Edu/nonograms/music/",ee=[`${O}alexander-nakarada-emotional-piano-improvisation.mp3`,`${O}alexander-nakarada-winter.mp3`],te=new Y(ee);function ne(t){te.togglePlayPause(),t.currentTarget.classList.toggle("off")}const oe=document.querySelector(".header__btn.turn-music"),R=document.querySelector(".modal__container"),y=document.querySelector(".modal");function E(t){t&&y.classList.add(t),R.classList.add("active"),y.classList.add("active")}function C(t){y.append(t)}function x(){for(R.classList.remove("active"),y.className="modal";y.firstElementChild.nextElementSibling;)y.firstElementChild.nextElementSibling.remove()}const b=y==null?void 0:y.querySelector(".close"),re=[[0,0,0,1,1],[0,0,0,1,0],[0,0,0,1,0],[1,1,1,1,0],[0,1,0,1,0]],se=[[1,0,1,0,1],[1,1,1,1,1],[0,1,1,1,0],[0,1,0,1,0],[0,1,1,1,0]],ae=[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[0,0,1,0,0],[0,1,1,1,0]],ce=[[0,1,1,1,0],[0,1,1,1,0],[0,1,1,1,0],[0,0,1,0,0],[0,1,1,1,0]],ie=[[0,1,1,1,0],[1,1,1,1,1],[1,0,1,0,1],[1,1,1,1,1],[0,1,0,1,0]],le=[[0,0,1,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,0,1,0],[1,0,0,0,0,0,0,0,0,1],[1,0,1,1,0,0,1,1,0,1],[1,0,0,0,0,0,0,0,0,1],[1,0,0,0,1,1,0,0,0,1],[1,0,1,0,0,0,0,1,0,1],[1,0,0,1,1,1,1,0,0,1],[0,1,0,0,0,0,0,0,1,0],[0,0,1,1,1,1,1,1,0,0]],de=[[0,0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,0],[0,0,0,1,1,1,1,1,0,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0]],me=[[0,0,1,0,1,0,1,0,0,0],[0,0,1,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0,0],[0,1,1,0,1,1,1,1,1,1],[0,1,1,0,1,1,1,1,0,1],[0,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0,0],[0,1,1,1,1,1,1,1,1,0]],ue=[[0,0,0,0,1,0,0,0,0,0],[0,0,0,1,1,1,0,0,0,0],[0,0,1,1,1,1,1,0,0,0],[0,1,1,1,1,1,1,1,0,0],[1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,0],[0,1,0,0,1,0,0,1,0,0],[0,1,0,0,1,0,0,1,0,0],[0,1,1,1,1,0,0,1,0,0],[0,1,1,1,1,0,0,1,0,0]],he=[[0,0,1,1,0,0,0,1,1,0],[0,1,0,0,1,0,1,0,0,1],[0,1,0,1,1,1,1,1,0,1],[0,0,1,1,0,1,0,1,1,0],[0,0,0,1,1,1,1,1,0,0],[0,0,1,1,1,0,1,1,1,0],[0,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,0]],fe=[[1,1,0,1,1,0,0,0,0,0,0,1,1,0,1],[1,1,0,1,1,0,1,0,0,1,0,1,1,0,1],[0,1,1,1,1,0,1,0,0,1,0,1,1,0,1],[0,0,1,1,1,1,1,0,0,0,1,1,1,1,1],[0,0,0,0,1,1,0,1,1,1,1,1,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,1,0,1,0,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1],[0,1,0,1,1,1,0,0,0,0,1,1,1,1,1],[0,1,1,1,1,1,0,0,0,0,1,1,1,1,1],[0,0,1,1,1,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1]],ge=[[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[1,1,0,1,1,0,1,0,0,0,1,1,0,1,1],[1,1,1,1,1,0,1,0,0,0,1,1,1,1,1],[1,0,0,0,1,0,1,0,0,0,1,0,0,0,1],[1,0,1,0,1,0,1,0,0,0,1,0,1,0,1],[1,0,1,0,1,1,1,1,1,1,1,0,1,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,1,0,0,0,0,0,0,0,1,0,0,1],[1,0,1,1,1,0,0,0,0,0,1,1,1,0,1],[1,0,0,1,0,0,1,1,1,0,0,1,0,0,1],[1,0,0,1,0,0,1,1,1,0,0,1,0,0,1],[1,0,0,0,0,0,1,1,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],ye=[[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,0,1,1,1,1,1,1,1,0,1,1,0],[0,1,0,0,0,1,1,0,1,1,0,0,0,1,0],[0,1,1,0,1,1,0,0,0,1,1,0,1,1,0],[0,1,1,0,1,1,0,0,0,1,1,0,1,1,0],[0,1,1,1,1,1,0,0,0,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0]],pe=[[0,0,0,0,0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,1,1,1,1,0,1,1,1],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],[1,0,0,0,0,0,1,1,1,1,1,1,1,1,0],[1,1,1,0,0,1,1,1,0,0,0,1,1,1,0],[1,1,1,1,1,1,1,0,1,1,1,0,1,1,0],[0,1,1,1,1,1,0,1,1,1,1,0,1,1,0],[0,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,0,1,1,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,0,0,0]],xe=[[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,1,1,1,1,0,0,1,1,0,1],[0,0,0,1,1,1,0,0,1,0,0,1,0,1,0],[1,1,1,0,1,1,1,0,1,0,0,1,0,0,0],[1,1,1,1,1,1,1,1,0,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,1,0,0,0,1,1,0],[0,0,0,0,1,1,1,1,1,1,0,0,0,1,1],[0,0,0,0,0,1,1,1,1,1,1,1,0,0,1],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,0,0,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,1,1,1,1,0,0,1,1,1,0],[0,0,0,0,1,1,1,0,0,0,1,1,1,0,0]],A={easy:[{name:"Dinosaur",matrix:re},{name:"Fortress",matrix:se},{name:"Plane",matrix:ae},{name:"Goblet",matrix:ce},{name:"Skull",matrix:ie}],medium:[{name:"House",matrix:ue},{name:"Aerostat",matrix:de},{name:"Cuppa",matrix:me},{name:"Smiley",matrix:le},{name:"Mouse",matrix:he}],hard:[{name:"Deer",matrix:fe},{name:"Rat",matrix:xe},{name:"Castle",matrix:ge},{name:"Duck",matrix:pe},{name:"Church",matrix:ye}]};function Ce(t,e){t.innerHTML="",A[e].map(o=>o.name).forEach(o=>{const s=document.createElement("option");s.value=o,s.textContent=o,s.className="nonogram-names-option",t.appendChild(s)})}const l=JSON.parse(localStorage.getItem("currentNonogram"))||null,c={nonogram:{name:(l==null?void 0:l.name)||"",playerName:(l==null?void 0:l.playerName)||"uknown player",difficulty:(l==null?void 0:l.difficulty)||"",matrix:(l==null?void 0:l.matrix)||[],currentProgress:(l==null?void 0:l.currentProgress)||[],truthyCellsIndexes:(l==null?void 0:l.truthyCellsIndexes)||[],excludedCellsIndexes:(l==null?void 0:l.excludedCellsIndexes)||[],truthyCells:[],falsyCells:[]}},D=c.nonogram;function w(t){for(const e in t)t.hasOwnProperty(e)&&D.hasOwnProperty(e)&&(D[e]=t[e])}function M(t=0){return Array.from({length:t},()=>Array(t).fill(0))}function Ie(t){const e=[];for(let n=0;n<t[0].length;n++){const r=[];for(let o=t.length-1;o>=0;o--)r.push(t[o][n]);e.push(r.reverse())}return e}function $(t){let e=[],n=1;if(!t.includes(1))return e.push(0),e.join(" ");for(let r=0;r<t.length;r+=1){let o=t[r],s=t[r+1];o===1&&s===1?n+=1:o===1&&!s&&(e.push(n),n=1)}return e.join(" ")}function Se(){const e=document.getElementById("helpDialog").content.cloneNode(!0);return e.querySelector(".ok").addEventListener("click",x),e}function Ee(){const t=c.nonogram.matrix,e=Ie(t),n=document.createElement("thead"),r=document.createElement("tr");for(let o=0;o<=t.length;o++){const s=document.createElement("th");if(s.className=`th_top ${c.nonogram.difficulty}`,o===0){const a=document.createElement("button");a.textContent="?",a.title="HELP",a.addEventListener("click",()=>{const u=Se();C(u),E("confirm")}),s.appendChild(a)}if(o>0&&e[o-1]){const a=$(e[o-1]);s.innerHTML=a.replace(/\s/g,"<br>")}r.appendChild(s)}return n.appendChild(r),n}class Le{constructor(e){this.container=e,this.time=Number(localStorage.getItem("timer"))||0,this.intervalId=null,this.isRunning=!1,this.render()}start(){this.intervalId||(this.intervalId=setInterval(()=>{this.time+=1,this.update()},1e3),this.isRunning=!0)}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,this.isRunning=!1)}reset(){this.stop(),this.time=0,this.update()}render(){this.container instanceof Element&&(this.container.textContent=this.formatTime(this.time))}update(){this.container instanceof Element&&(this.container.textContent=this.formatTime(this.time),this.setLocalStorage())}getTime(){return this.time}setTime(e){this.time=e}setLocalStorage(){localStorage.setItem("timer",this.time)}formatTime(e){const n=Math.floor(e/60),r=e%60,o=String(n).padStart(2,"0"),s=String(r).padStart(2,"0");return`${o}:${s}`}}const be=document.querySelector(".timer-section span"),L=new Le(be);function ke(){const e=document.getElementById("victoryDialog").content.cloneNode(!0);return e.querySelector(".ok").addEventListener("click",x),e}function ve(t){const e={easy:1,medium:2,hard:3};return t.sort((n,r)=>{const o=e[r.difficulty]-e[n.difficulty];return o===0?n.time-r.time:o})}function Ne(t){const e=JSON.parse(localStorage.getItem("recordsTable"))||[];e.push(t);const n=ve(e);for(;n.length>5;)n.pop();localStorage.setItem("recordsTable",JSON.stringify(n))}function G(){const t={name:"",playerName:"",difficulty:"",matrix:[],currentProgress:[],truthyCells:[],falsyCells:[],truthyCellsIndexes:[],excludedCellsIndexes:[]};w(t),localStorage.setItem("currentNonogram",JSON.stringify(t))}function J(){const{truthyCells:t,falsyCells:e}=c.nonogram;t.forEach(n=>{n.classList.remove("excluded","border5x5H","border5x5V"),n.classList.add("colorized")}),e.forEach(n=>{n.classList.remove("colorized","excluded","border5x5H","border5x5V")}),I.style.pointerEvents="none",G(),L.reset()}function _(){const t=JSON.parse(JSON.stringify(c.nonogram)),{name:e,playerName:n,difficulty:r}=t,o=L.getTime(),s={nonogramName:e,playerName:n,difficulty:r,time:o},a=ke();C(a),E("victory"),Ne(s),J()}function Pe(t,e){if(t.target.nodeName!=="TD")return;const n=c.nonogram.currentProgress,r=c.nonogram.matrix,o=t.target;o.classList.toggle("colorized"),o.classList.remove("excluded");const s=e.indexOf(o),a=Math.floor(s/r.length),u=s-r.length*a,m=n[a];let i=m[u];i=i?0:1,m[u]=i;const d=c.nonogram.truthyCellsIndexes,f=c.nonogram.excludedCellsIndexes;if(i)d.push(s);else{const S=d.indexOf(s);S!==-1&&d.splice(S,1)}const h=f.indexOf(s);h!==-1&&f.splice(h,1);const g=JSON.parse(localStorage.getItem("currentNonogram"))||{};g.currentProgress=n,g.truthyCellsIndexes=d,g.excludedCellsIndexes=f,localStorage.setItem("currentNonogram",JSON.stringify(g)),JSON.stringify(n)===JSON.stringify(r)&&_()}function we(t,e){if(t.target.nodeName!=="TD")return;t.preventDefault();const n=c.nonogram.currentProgress,r=c.nonogram.matrix,o=t.target,s=e.indexOf(o),a=Math.floor(s/r.length),u=s-r.length*a,m=n[a];m[u]=0,o.classList.remove("colorized");const i=c.nonogram.excludedCellsIndexes,d=c.nonogram.truthyCellsIndexes;if(o.classList.contains("excluded")){o.classList.remove("excluded");const p=i.indexOf(s);p!==-1&&i.splice(p,1)}else o.classList.add("excluded"),i.push(s);const f=d.indexOf(s);f!==-1&&d.splice(f,1);const h=JSON.parse(localStorage.getItem("currentNonogram"))||{};h.currentProgress=n,h.excludedCellsIndexes=i,h.truthyCellsIndexes=d,localStorage.setItem("currentNonogram",JSON.stringify(h)),JSON.stringify(n)===JSON.stringify(r)&&_()}function H(){const t=[],e=[],n=[],r=document.createElement("tbody"),o=c.nonogram.matrix;for(let a=0;a<o.length;a++){const u=document.createElement("tr");for(let m=0;m<=o.length;m++){let i;m===0?(i=document.createElement("th"),i.classList.add("th_left",c.nonogram.difficulty),i.textContent=$(o[a])):(i=document.createElement("td"),i.classList.add("td",c.nonogram.difficulty),m%5===0&&o.length>5&&m!==o[a].length&&i.classList.add("border5x5V"),(a+1)%5===0&&o.length>5&&a+1!==o.length&&i.classList.add("border5x5H"),o[a][m-1]===1&&n.push(i),o[a][m-1]===0&&e.push(i),t.push(i)),u.appendChild(i)}r.appendChild(u)}r.addEventListener("click",a=>Pe(a,t)),r.addEventListener("contextmenu",a=>we(a,t));function s(a){!L.isRunning&&a.target.nodeName==="TD"&&L.start()}return r.addEventListener("click",s,{once:!0}),r.addEventListener("contextmenu",a=>{a.preventDefault(),s(a)},{once:!0}),c.nonogram.truthyCells=n,c.nonogram.falsyCells=e,r}const I=document.getElementById("table");function F(){I.innerHTML="";const t=Ee(),e=H();I.append(t,e)}function Te(){const e=document.getElementById("newGameDialog").content.cloneNode(!0),n=e.querySelector("form.start-game-form"),r=n.querySelector("#difficulty-select"),o=n.querySelector("#nonogram-names-select"),s=n.querySelector("#playerName");return r.addEventListener("change",()=>{const a=r.value;Ce(o,a)}),n.addEventListener("submit",a=>{a.preventDefault();const u=o.value,m=r.value,i=A[m].find(({name:f})=>f===u).matrix,d={name:u,difficulty:m,playerName:s.value.trim()||"uknown player",matrix:i,currentProgress:M(i.length)};G(),w(d),localStorage.setItem("currentNonogram",JSON.stringify(d)),x(),I.style.pointerEvents="all",F()}),e}function Oe(){const t=I.querySelector("tbody"),e=I.querySelector("thead");t.remove();const n=c.nonogram.matrix.length,r={currentProgress:M(n),excludedCellsIndexes:[],truthyCellsIndexes:[]};w(r);const o=JSON.parse(localStorage.getItem("currentNonogram"))||{};o.currentProgress=c.nonogram.currentProgress,o.excludedCellsIndexes=c.nonogram.excludedCellsIndexes,o.truthyCellsIndexes=c.nonogram.truthyCellsIndexes,localStorage.setItem("currentNonogram",JSON.stringify(o)),e.insertAdjacentElement("afterend",H())}function B(){const e=document.getElementById("resetGameDialog").content.cloneNode(!0);return e.querySelector(".ok").addEventListener("click",x),e}function De(){var e,n;if(!!((e=c==null?void 0:c.nonogram)!=null&&e.name)&&!!((n=c==null?void 0:c.nonogram)!=null&&n.difficulty))Oe();else{const r=B();C(r),E("alert")}}function qe(){const e=document.getElementById("showSolutionDialog").content.cloneNode(!0),n=e.querySelector(".submit"),r=e.querySelector(".cancel");return n.addEventListener("click",()=>{J(),x()}),r.addEventListener("click",x),e}function Re(){var e,n;if(!!((e=c==null?void 0:c.nonogram)!=null&&e.name)&&!!((n=c==null?void 0:c.nonogram)!=null&&n.difficulty)){const r=qe();C(r)}else{const r=B();C(r)}E("alert")}function Ae(){const t=document.createElement("div");t.className="records-container";const e=document.createElement("h3");e.textContent="Records",e.className="difficulty-label form-title";const n=document.createElement("button");n.className="control-btn start-game-btn",n.textContent="OK",n.addEventListener("click",x);const r=document.createElement("table");r.className="records-table";const o=document.createElement("thead"),s=document.createElement("tr");["#","Player Name","Nonogram","Difficulty","Time"].forEach(i=>{const d=document.createElement("th");d.className="records__th",d.textContent=i,s.appendChild(d)}),o.appendChild(s),r.appendChild(o);const u=document.createElement("tbody"),m=JSON.parse(localStorage.getItem("recordsTable"))||[];for(let i=0;i<5;i+=1){const d=document.createElement("tr"),f=document.createElement("td");if(f.textContent=(i+1).toString(),d.appendChild(f),m[i]){const h=m[i];["playerName","nonogramName","difficulty","time"].forEach(p=>{const S=document.createElement("td");p==="time"&&!isNaN(h[p])?S.textContent=L.formatTime(h[p]):S.textContent=h[p],d.appendChild(S)})}else for(let h=0;h<4;h+=1){const g=document.createElement("td");g.textContent="empty",d.appendChild(g)}u.appendChild(d)}return r.appendChild(u),t.append(e,r,n),t}const k=document.querySelector(".control-btn.new-game"),v=document.querySelector(".control-btn.reset-game"),N=document.querySelector(".control-btn.show-solution"),P=document.querySelector(".control-btn.records");function Me(){k==null||k.addEventListener("click",()=>{const t=Te();C(t),E("confirm")}),v==null||v.addEventListener("click",De),N==null||N.addEventListener("click",Re),P==null||P.addEventListener("click",()=>{const t=Ae();C(t),E("records")})}const{truthyCellsIndexes:$e,excludedCellsIndexes:Ge}=c.nonogram,Je=$e.length||Ge.length;function _e(){F();const t=I.querySelectorAll("td"),{truthyCellsIndexes:e,excludedCellsIndexes:n}=c.nonogram;t.forEach((r,o)=>{e.includes(o)&&r.classList.add("colorized"),n.includes(o)&&r.classList.add("excluded")})}const He="a6mPIjNopR8bPfhreg4tukiBeua9PQDq7XDRFGBnRFk";class Fe{constructor(e){this.apiKey=e,this.baseURL="https://api.unsplash.com"}async fetchFromAPI(e){const n=await fetch(`${this.baseURL}${e}`,{headers:{Authorization:`Client-ID ${this.apiKey}`}});if(!n.ok)throw n.status===401||n.status===403?(alert("Превышен лимит запросов на сервер, попробуйте другой API ключ. Ищите в readMe."),new Error("Превышен лимит запросов на сервер")):new Error(`HTTP error! Status: ${n.status}`);return await n.json()}async getRandomPhotos(e=1,n="landscape"){const r=`/photos/random/?count=${e}&orientation=${n}`;return await this.fetchFromAPI(r)}async searchPhotos(e,n=30,r=1,o="landscape"){const s=`/search/photos/?query=${e}&per_page=${n}&page=${r}&orientation=${o}`,{results:a}=await this.fetchFromAPI(s);return a||[]}}const K=new Fe(He),q=document.getElementById("grid");function j(t){q.innerHTML="",t.forEach(e=>{const n=e.urls.small,r=e.alt_description,o=document.createElement("img");o.src=n,o.alt=r,q.append(o)})}async function Be(){const t=await K.getRandomPhotos(30);j(t)}const z=document.querySelectorAll(".gallery-form select");function Ke(t){z.forEach(e=>{e!==t&&(e.selectedIndex=0)})}function je(){z.forEach(t=>{t.addEventListener("change",async e=>{try{Ke(e.target);const n=await K.searchPhotos(e.target.value);j(n)}catch(n){console.error("Ошибка при получении изображений:",n)}})})}document.addEventListener("DOMContentLoaded",function(){const t=Q("displayMode")||"light";X(t)});W.addEventListener("click",Z);oe.addEventListener("click",ne);U();const V=window.location.pathname,ze=V.endsWith("/nonograms/"),Ve=V.endsWith("/Photo-Gallery/");ze&&(Me(),b==null||b.addEventListener("click",x),Je?_e():L.reset());Ve&&(Be(),je());
//# sourceMappingURL=main-Dt1vkRnW.js.map
