(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();function Z(){const t=window.location.pathname,e=document.querySelector(".header__link.nonograms"),o=document.querySelector(".header__link.gallery");(t.endsWith("/nonograms/")?e:o).classList.add("accent")}const Q=document.querySelector(".switch-theme__input");function X(t){const e=document.cookie.split(";").map(o=>o.trim());for(const o of e){const[r,n]=o.split("=");if(r===t)return n}return null}function M(t,e,o){let r=new Date;r.setTime(r.getTime()+Y(o));let n=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${n};path=/`}function Y(t){return t*24*60*60*1e3}const T="dark",R="light";function ee(t){t.currentTarget.checked?(document.documentElement.classList.replace(R,T),M("displayMode","dark",30)):(document.documentElement.classList.replace(T,R),M("displayMode","light",30))}function te(t){const e=document.querySelector(".switch-theme__input");e.checked=t===T,document.documentElement.className=t}class ne{constructor(e){this.playlist=e,this.currentTrackIndex=0,this.isPlaying=!1,this.audioPlayer=new Audio,this.audioPlayer.src=this.playlist[this.currentTrackIndex],this.audioPlayer.addEventListener("ended",()=>this.playNextTrack())}playNextTrack(){this.currentTrackIndex=(this.currentTrackIndex+1)%this.playlist.length,this.audioPlayer.src=this.playlist[this.currentTrackIndex],this.audioPlayer.play()}play(){this.audioPlayer.play(),this.isPlaying=!0}pause(){this.audioPlayer.pause(),this.isPlaying=!1}togglePlayPause(){this.isPlaying?this.pause():this.play()}}const A="/Palmo-Edu/nonograms/music/",oe=[`${A}alexander-nakarada-emotional-piano-improvisation.mp3`,`${A}alexander-nakarada-winter.mp3`],re=new ne(oe);function se(t){re.togglePlayPause(),t.currentTarget.classList.toggle("off")}const ae=document.querySelector(".header__btn.turn-music"),$=document.querySelector(".modal__container"),g=document.querySelector(".modal");function L(t){t&&g.classList.add(t),$.classList.add("active"),g.classList.add("active")}function x(t){g.append(t)}function p(){for($.classList.remove("active"),g.className="modal";g.firstElementChild.nextElementSibling;)g.firstElementChild.nextElementSibling.remove()}const b=g==null?void 0:g.querySelector(".close"),ce=[[0,0,0,1,1],[0,0,0,1,0],[0,0,0,1,0],[1,1,1,1,0],[0,1,0,1,0]],ie=[[1,0,1,0,1],[1,1,1,1,1],[0,1,1,1,0],[0,1,0,1,0],[0,1,1,1,0]],le=[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[0,0,1,0,0],[0,1,1,1,0]],de=[[0,1,1,1,0],[0,1,1,1,0],[0,1,1,1,0],[0,0,1,0,0],[0,1,1,1,0]],me=[[0,1,1,1,0],[1,1,1,1,1],[1,0,1,0,1],[1,1,1,1,1],[0,1,0,1,0]],ue=[[0,0,1,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,0,1,0],[1,0,0,0,0,0,0,0,0,1],[1,0,1,1,0,0,1,1,0,1],[1,0,0,0,0,0,0,0,0,1],[1,0,0,0,1,1,0,0,0,1],[1,0,1,0,0,0,0,1,0,1],[1,0,0,1,1,1,1,0,0,1],[0,1,0,0,0,0,0,0,1,0],[0,0,1,1,1,1,1,1,0,0]],he=[[0,0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,0],[0,0,0,1,1,1,1,1,0,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0]],fe=[[0,0,1,0,1,0,1,0,0,0],[0,0,1,0,1,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0,0],[0,1,1,0,1,1,1,1,1,1],[0,1,1,0,1,1,1,1,0,1],[0,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0,0],[0,1,1,1,1,1,1,1,1,0]],ge=[[0,0,0,0,1,0,0,0,0,0],[0,0,0,1,1,1,0,0,0,0],[0,0,1,1,1,1,1,0,0,0],[0,1,1,1,1,1,1,1,0,0],[1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,0],[0,1,0,0,1,0,0,1,0,0],[0,1,0,0,1,0,0,1,0,0],[0,1,1,1,1,0,0,1,0,0],[0,1,1,1,1,0,0,1,0,0]],ye=[[0,0,1,1,0,0,0,1,1,0],[0,1,0,0,1,0,1,0,0,1],[0,1,0,1,1,1,1,1,0,1],[0,0,1,1,0,1,0,1,1,0],[0,0,0,1,1,1,1,1,0,0],[0,0,1,1,1,0,1,1,1,0],[0,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,0]],pe=[[1,1,0,1,1,0,0,0,0,0,0,1,1,0,1],[1,1,0,1,1,0,1,0,0,1,0,1,1,0,1],[0,1,1,1,1,0,1,0,0,1,0,1,1,0,1],[0,0,1,1,1,1,1,0,0,0,1,1,1,1,1],[0,0,0,0,1,1,0,1,1,1,1,1,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,1,0,1,0,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1],[0,1,0,1,1,1,0,0,0,0,1,1,1,1,1],[0,1,1,1,1,1,0,0,0,0,1,1,1,1,1],[0,0,1,1,1,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1]],xe=[[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[1,1,0,1,1,0,1,0,0,0,1,1,0,1,1],[1,1,1,1,1,0,1,0,0,0,1,1,1,1,1],[1,0,0,0,1,0,1,0,0,0,1,0,0,0,1],[1,0,1,0,1,0,1,0,0,0,1,0,1,0,1],[1,0,1,0,1,1,1,1,1,1,1,0,1,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,1,0,0,0,0,0,0,0,1,0,0,1],[1,0,1,1,1,0,0,0,0,0,1,1,1,0,1],[1,0,0,1,0,0,1,1,1,0,0,1,0,0,1],[1,0,0,1,0,0,1,1,1,0,0,1,0,0,1],[1,0,0,0,0,0,1,1,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],Se=[[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,0,1,1,1,1,1,1,1,0,1,1,0],[0,1,0,0,0,1,1,0,1,1,0,0,0,1,0],[0,1,1,0,1,1,0,0,0,1,1,0,1,1,0],[0,1,1,0,1,1,0,0,0,1,1,0,1,1,0],[0,1,1,1,1,1,0,0,0,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0]],Ce=[[0,0,0,0,0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,1,1,1,1,0,1,1,1],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0],[1,0,0,0,0,0,1,1,1,1,1,1,1,1,0],[1,1,1,0,0,1,1,1,0,0,0,1,1,1,0],[1,1,1,1,1,1,1,0,1,1,1,0,1,1,0],[0,1,1,1,1,1,0,1,1,1,1,0,1,1,0],[0,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,0,1,1,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,0,0,0]],Ie=[[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,1,1,1,1,0,0,1,1,0,1],[0,0,0,1,1,1,0,0,1,0,0,1,0,1,0],[1,1,1,0,1,1,1,0,1,0,0,1,0,0,0],[1,1,1,1,1,1,1,1,0,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,1,0,0,0,1,1,0],[0,0,0,0,1,1,1,1,1,1,0,0,0,1,1],[0,0,0,0,0,1,1,1,1,1,1,1,0,0,1],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,0,0,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,1,1,1,1,0,0,1,1,1,0],[0,0,0,0,1,1,1,0,0,0,1,1,1,0,0]],J={easy:[{name:"Dinosaur",matrix:ce},{name:"Fortress",matrix:ie},{name:"Plane",matrix:le},{name:"Goblet",matrix:de},{name:"Skull",matrix:me}],medium:[{name:"House",matrix:ge},{name:"Aerostat",matrix:he},{name:"Cuppa",matrix:fe},{name:"Smiley",matrix:ue},{name:"Mouse",matrix:ye}],hard:[{name:"Deer",matrix:pe},{name:"Rat",matrix:Ie},{name:"Castle",matrix:xe},{name:"Duck",matrix:Ce},{name:"Church",matrix:Se}]};function Ee(t,e){t.innerHTML="",J[e].map(n=>n.name).forEach(n=>{const s=document.createElement("option");s.value=n,s.textContent=n,s.className="nonogram-names-option",t.appendChild(s)})}const l=JSON.parse(localStorage.getItem("currentNonogram"))||null,Le="uknown player",c={nonogram:{name:(l==null?void 0:l.name)||"",playerName:(l==null?void 0:l.playerName)||Le,difficulty:(l==null?void 0:l.difficulty)||"",matrix:(l==null?void 0:l.matrix)||[],currentProgress:(l==null?void 0:l.currentProgress)||[],truthyCellsIndexes:(l==null?void 0:l.truthyCellsIndexes)||[],excludedCellsIndexes:(l==null?void 0:l.excludedCellsIndexes)||[],truthyCells:[],falsyCells:[]}},G=c.nonogram;function D(t){for(const e in t)t.hasOwnProperty(e)&&G.hasOwnProperty(e)&&(G[e]=t[e])}function _(t=0){return Array.from({length:t},()=>Array(t).fill(0))}function be(t){const e=[];for(let o=0;o<t[0].length;o++){const r=[];for(let n=t.length-1;n>=0;n--)r.push(t[n][o]);e.push(r.reverse())}return e}function H(t){let e=[],o=1;if(!t.includes(1))return e.push(0),e.join(" ");for(let r=0;r<t.length;r+=1){let n=t[r],s=t[r+1];n===1&&s===1?o+=1:n===1&&!s&&(e.push(o),o=1)}return e.join(" ")}function ve(){const e=document.getElementById("helpDialog").content.cloneNode(!0);return e.querySelector(".ok").addEventListener("click",p),e}function Ne(){const t=c.nonogram.matrix,e=be(t),o=document.createElement("thead"),r=document.createElement("tr");for(let n=0;n<=t.length;n++){const s=document.createElement("th");if(s.className=`th_top ${c.nonogram.difficulty}`,n===0){const a=document.createElement("button");a.textContent="?",a.title="HELP",a.addEventListener("click",()=>{const u=ve();x(u),L("confirm")}),s.appendChild(a)}if(n>0&&e[n-1]){const a=H(e[n-1]);s.innerHTML=a.replace(/\s/g,"<br>")}r.appendChild(s)}return o.appendChild(r),o}class Pe{constructor(e){this.container=e,this.time=Number(localStorage.getItem("timer"))||0,this.intervalId=null,this.isRunning=!1,this.render()}start(){this.intervalId||(this.intervalId=setInterval(()=>{this.time+=1,this.update()},1e3),this.isRunning=!0)}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,this.isRunning=!1)}reset(){this.stop(),this.time=0,this.update()}render(){this.container instanceof Element&&(this.container.textContent=this.formatTime(this.time))}update(){this.container instanceof Element&&(this.container.textContent=this.formatTime(this.time),this.setLocalStorage())}getTime(){return this.time}setTime(e){this.time=e}setLocalStorage(){localStorage.setItem("timer",this.time)}formatTime(e){const o=Math.floor(e/60),r=e%60,n=String(o).padStart(2,"0"),s=String(r).padStart(2,"0");return`${n}:${s}`}}const ke=document.querySelector(".timer-section span"),S=new Pe(ke);function we(){const e=document.getElementById("victoryDialog").content.cloneNode(!0);return e.querySelector(".ok").addEventListener("click",p),e}function Te(t){const e={easy:1,medium:2,hard:3};return t.sort((o,r)=>{const n=e[r.difficulty]-e[o.difficulty];return n===0?o.time-r.time:n})}function De(t){const e=JSON.parse(localStorage.getItem("recordsTable"))||[];e.push(t);const o=Te(e);for(;o.length>5;)o.pop();localStorage.setItem("recordsTable",JSON.stringify(o))}function F(){const t={name:"",playerName:"",difficulty:"",matrix:[],currentProgress:[],truthyCells:[],falsyCells:[],truthyCellsIndexes:[],excludedCellsIndexes:[]};D(t),localStorage.setItem("currentNonogram",JSON.stringify(t))}function K(){const{truthyCells:t,falsyCells:e}=c.nonogram;t.forEach(o=>{o.classList.remove("excluded","border5x5H","border5x5V"),o.classList.add("colorized")}),e.forEach(o=>{o.classList.remove("colorized","excluded","border5x5H","border5x5V")}),C.style.pointerEvents="none",F(),S.reset()}function z(){const t=JSON.parse(JSON.stringify(c.nonogram)),{name:e,playerName:o,difficulty:r}=t,n=S.getTime(),s={nonogramName:e,playerName:o,difficulty:r,time:n},a=we();x(a),L("victory"),De(s),K()}function Oe(t,e){if(t.target.nodeName!=="TD")return;const o=c.nonogram.currentProgress,r=c.nonogram.matrix,n=t.target;n.classList.toggle("colorized"),n.classList.remove("excluded");const s=e.indexOf(n),a=Math.floor(s/r.length),u=s-r.length*a,d=o[a];let i=d[u];i=i?0:1,d[u]=i;const m=c.nonogram.truthyCellsIndexes,h=c.nonogram.excludedCellsIndexes;if(i)m.push(s);else{const E=m.indexOf(s);E!==-1&&m.splice(E,1)}const f=h.indexOf(s);f!==-1&&h.splice(f,1);const I=JSON.parse(localStorage.getItem("currentNonogram"))||{};I.currentProgress=o,I.truthyCellsIndexes=m,I.excludedCellsIndexes=h,localStorage.setItem("currentNonogram",JSON.stringify(I)),JSON.stringify(o)===JSON.stringify(r)&&z()}function qe(t,e){if(t.target.nodeName!=="TD")return;t.preventDefault();const o=c.nonogram.currentProgress,r=c.nonogram.matrix,n=t.target,s=e.indexOf(n),a=Math.floor(s/r.length),u=s-r.length*a,d=o[a];d[u]=0,n.classList.remove("colorized");const i=c.nonogram.excludedCellsIndexes,m=c.nonogram.truthyCellsIndexes;if(n.classList.contains("excluded")){n.classList.remove("excluded");const y=i.indexOf(s);y!==-1&&i.splice(y,1)}else n.classList.add("excluded"),i.push(s);const h=m.indexOf(s);h!==-1&&m.splice(h,1);const f=JSON.parse(localStorage.getItem("currentNonogram"))||{};f.currentProgress=o,f.excludedCellsIndexes=i,f.truthyCellsIndexes=m,localStorage.setItem("currentNonogram",JSON.stringify(f)),JSON.stringify(o)===JSON.stringify(r)&&z()}function B(){const t=[],e=[],o=[],r=document.createElement("tbody"),n=c.nonogram.matrix;for(let a=0;a<n.length;a++){const u=document.createElement("tr");for(let d=0;d<=n.length;d++){let i;d===0?(i=document.createElement("th"),i.classList.add("th_left",c.nonogram.difficulty),i.textContent=H(n[a])):(i=document.createElement("td"),i.classList.add("td",c.nonogram.difficulty),d%5===0&&n.length>5&&d!==n[a].length&&i.classList.add("border5x5V"),(a+1)%5===0&&n.length>5&&a+1!==n.length&&i.classList.add("border5x5H"),n[a][d-1]===1&&o.push(i),n[a][d-1]===0&&e.push(i),t.push(i)),u.appendChild(i)}r.appendChild(u)}r.addEventListener("click",a=>Oe(a,t)),r.addEventListener("contextmenu",a=>qe(a,t));function s(a){!S.isRunning&&a.target.nodeName==="TD"&&S.start()}return r.addEventListener("click",s,{once:!0}),r.addEventListener("contextmenu",a=>{a.preventDefault(),s(a)},{once:!0}),c.nonogram.truthyCells=o,c.nonogram.falsyCells=e,r}const C=document.getElementById("table");function V(){C.innerHTML="";const t=Ne(),e=B();C.append(t,e)}function Me(){const e=document.getElementById("newGameDialog").content.cloneNode(!0),o=e.querySelector("form.start-game-form"),r=o.querySelector("#difficulty-select"),n=o.querySelector("#nonogram-names-select"),s=o.querySelector("#playerName");return r.addEventListener("change",()=>{const a=r.value;Ee(n,a)}),o.addEventListener("submit",a=>{a.preventDefault();const u=n.value,d=r.value,i=J[d].find(({name:h})=>h===u).matrix,m={name:u,difficulty:d,playerName:s.value.trim()||"uknown player",matrix:i,currentProgress:_(i.length)};F(),S.reset(),D(m),localStorage.setItem("currentNonogram",JSON.stringify(m)),p(),C.style.pointerEvents="all",V()}),e}function Re(){const t=C.querySelector("tbody"),e=C.querySelector("thead");t.remove();const o=c.nonogram.matrix.length,r={currentProgress:_(o),excludedCellsIndexes:[],truthyCellsIndexes:[]};D(r);const n=JSON.parse(localStorage.getItem("currentNonogram"))||{};n.currentProgress=c.nonogram.currentProgress,n.excludedCellsIndexes=c.nonogram.excludedCellsIndexes,n.truthyCellsIndexes=c.nonogram.truthyCellsIndexes,localStorage.setItem("currentNonogram",JSON.stringify(n)),e.insertAdjacentElement("afterend",B())}function j(){const e=document.getElementById("resetGameDialog").content.cloneNode(!0);return e.querySelector(".ok").addEventListener("click",p),e}function Ae(){var e,o;if(!!((e=c==null?void 0:c.nonogram)!=null&&e.name)&&!!((o=c==null?void 0:c.nonogram)!=null&&o.difficulty))Re();else{const r=j();x(r),L("alert")}}function Ge(){const e=document.getElementById("showSolutionDialog").content.cloneNode(!0),o=e.querySelector(".submit"),r=e.querySelector(".cancel");return o.addEventListener("click",()=>{K(),p()}),r.addEventListener("click",p),e}function $e(){var e,o;if(!!((e=c==null?void 0:c.nonogram)!=null&&e.name)&&!!((o=c==null?void 0:c.nonogram)!=null&&o.difficulty)){const r=Ge();x(r)}else{const r=j();x(r)}L("alert")}function Je(){const t=document.createElement("div");t.className="records-container";const e=document.createElement("h3");e.textContent="Records",e.className="difficulty-label form-title";const o=document.createElement("button");o.className="control-btn start-game-btn",o.textContent="OK",o.addEventListener("click",p);const r=JSON.parse(localStorage.getItem("recordsTable"))||[];if(r.length===0){const n=document.createElement("p");n.textContent="No records yet",n.className="norecords-text",t.append(e,n,o)}else{const n=document.createElement("table");n.className="records-table";const s=document.createElement("thead"),a=document.createElement("tr");["#","Player Name","Nonogram","Difficulty","Time"].forEach(i=>{const m=document.createElement("th");m.className="records__th",m.textContent=i,a.appendChild(m)}),s.appendChild(a),n.appendChild(s);const d=document.createElement("tbody");r.forEach((i,m)=>{const h=document.createElement("tr"),f=document.createElement("td");f.textContent=(m+1).toString(),h.appendChild(f),["playerName","nonogramName","difficulty","time"].forEach(y=>{const E=document.createElement("td");y==="time"&&!isNaN(i[y])?E.textContent=S.formatTime(i[y]):E.textContent=i[y],h.appendChild(E)}),d.appendChild(h)}),n.appendChild(d),t.append(e,n,o)}return t}const v=document.querySelector(".control-btn.new-game"),N=document.querySelector(".control-btn.reset-game"),P=document.querySelector(".control-btn.show-solution"),k=document.querySelector(".control-btn.records");function _e(){v==null||v.addEventListener("click",()=>{const t=Me();x(t),L("confirm")}),N==null||N.addEventListener("click",Ae),P==null||P.addEventListener("click",$e),k==null||k.addEventListener("click",()=>{const t=Je();x(t),L("records")})}const{truthyCellsIndexes:He,excludedCellsIndexes:Fe}=c.nonogram,Ke=He.length||Fe.length;function ze(){V();const t=C.querySelectorAll("td"),{truthyCellsIndexes:e,excludedCellsIndexes:o}=c.nonogram;t.forEach((r,n)=>{e.includes(n)&&r.classList.add("colorized"),o.includes(n)&&r.classList.add("excluded")})}const Be="jFgS8tteGD425f4oZfygQVaVnD6gt6GucN2yyz3xFek";class Ve{constructor(e){this.apiKey=e,this.baseURL="https://api.unsplash.com"}async fetchFromAPI(e){const o=await fetch(`${this.baseURL}${e}`,{headers:{Authorization:`Client-ID ${this.apiKey}`}});if(!o.ok)throw o.status===401||o.status===403?(alert("Превышен лимит запросов на сервер, попробуйте другой API ключ. Ищите в readMe."),new Error("Превышен лимит запросов на сервер")):new Error(`HTTP error! Status: ${o.status}`);return await o.json()}async getRandomPhotos(e=1,o="landscape"){const r=`/photos/random/?count=${e}&orientation=${o}`;return await this.fetchFromAPI(r)}async searchPhotos(e,o=30,r=1,n="landscape"){const s=`/search/photos/?query=${e}&per_page=${o}&page=${r}&orientation=${n}`,{results:a}=await this.fetchFromAPI(s);return a||[]}}const O=new Ve(Be),w=document.getElementById("grid");function q(t){t.length?(w.innerHTML="",t.forEach(e=>{const o=e.urls.small,r=e.alt_description,n=document.createElement("img");n.src=o,n.alt=r,w.append(n)})):w.innerHTML="По данному запросу картинок не найдено"}async function je(){const t=await O.getRandomPhotos(30);q(t)}function Ue(){const t=document.querySelector(".searchInputWrapper"),e=document.querySelector(".searchInput");t.addEventListener("submit",async o=>{o.preventDefault();const r=e.value.trim();if(r){try{const n=await O.searchPhotos(r);q(n)}catch(n){console.error("Ошибка при получении изображений:",n)}e.blur()}})}const U=document.querySelectorAll(".gallery-form select");function We(){U.forEach(t=>{t.addEventListener("change",async e=>{try{Ze(e.target);const o=await O.searchPhotos(e.target.value);q(o)}catch(o){console.error("Ошибка при получении изображений:",o)}})})}function Ze(t){U.forEach(e=>{e!==t&&(e.selectedIndex=0)})}function Qe(){Ue(),We()}document.addEventListener("DOMContentLoaded",function(){const t=X("displayMode")||"light";te(t)});Q.addEventListener("click",ee);ae.addEventListener("click",se);Z();const W=window.location.pathname,Xe=W.endsWith("/nonograms/"),Ye=W.endsWith("/Photo-Gallery/");Xe&&(_e(),b==null||b.addEventListener("click",p),Ke?ze():S.reset());Ye&&(je(),Qe());
//# sourceMappingURL=main-BqhEgktF.js.map
